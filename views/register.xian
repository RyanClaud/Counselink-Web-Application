<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register | CounseLink</title>
    <link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            --neumorphic-bg: #e0e5ec;
            --neumorphic-shadow-dark: #a3b1c6;
            --neumorphic-shadow-light: #ffffff;
            --neumorphic-text: #555;
            font-family: 'Poppins', sans-serif;
            background-color: var(--neumorphic-bg);
            transition: background-color 0.3s ease;
        }
        [data-bs-theme="dark"] body {
            --neumorphic-bg: #2c3344;
            --neumorphic-shadow-dark: #242a38;
            --neumorphic-shadow-light: #343c50;
            --neumorphic-text: #d1d5db;
        }
        [data-bs-theme="dark"] .text-primary, [data-bs-theme="dark"] a.text-primary {
            color: #60a5fa !important;
        }
        [data-bs-theme="dark"] .form-control::placeholder, [data-bs-theme="dark"] .form-select {
            color: #6b7280;
        }
        [data-bs-theme="dark"] .btn-primary {
            color: white;
        }
        .form-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--neumorphic-text);
            padding: 2rem 0;
        }
        .card {
            background: var(--neumorphic-bg);
            border-radius: 20px;
            border: none;
            box-shadow: 9px 9px 16px var(--neumorphic-shadow-dark), -9px -9px 16px var(--neumorphic-shadow-light) !important;
        }
        .form-control, .form-select {
            background-color: var(--neumorphic-bg);
            border: none;
            border-radius: 10px;
            box-shadow: inset 5px 5px 10px var(--neumorphic-shadow-dark), inset -5px -5px 10px var(--neumorphic-shadow-light);
            color: var(--neumorphic-text);
        }
        .form-control:focus, .form-select:focus {
            background-color: var(--neumorphic-bg);
            color: var(--neumorphic-text);
            box-shadow: inset 5px 5px 10px var(--neumorphic-shadow-dark), inset -5px -5px 10px var(--neumorphic-shadow-light);
        }
        .btn-primary {
            border: none;
            border-radius: 10px;
            box-shadow: 5px 5px 10px var(--neumorphic-shadow-dark), -5px -5px 10px var(--neumorphic-shadow-light);
            transition: all 0.2s ease-in-out;
        }
        .btn-primary:hover {
            box-shadow: 7px 7px 14px var(--neumorphic-shadow-dark), -7px -7px 14px var(--neumorphic-shadow-light);
        }
        .btn-primary:active, .btn-primary:focus {
            box-shadow: inset 5px 5px 10px var(--neumorphic-shadow-dark), inset -5px -5px 10px var(--neumorphic-shadow-light) !important;
        }
        .text-primary, a.text-primary {
            color: #2d5016 !important;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #2d5016 0%, #1e3a8a 100%);
            color: white;
        }
        .text-muted {
            color: var(--neumorphic-text) !important;
            opacity: 0.8;
        }
        .logo-img {
            animation: jump 2s ease-in-out infinite;
        }
        @keyframes jump {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-10px) scale(1.05); }
        }
    </style>
    <!-- Theme Toggle CSS -->
    <style>
        .theme-toggle-container {
            position: absolute; top: 1.5rem; right: 1.5rem; display: flex;
            align-items: center; gap: 0.5rem; color: var(--neumorphic-text);
        }
        .theme-toggle-container .fa-sun { color: #FACC15; }
        [data-bs-theme="dark"] .theme-toggle-container .fa-moon { color: #818cf8; }
        .theme-switch {
            position: relative; display: inline-block; width: 48px; height: 24px;
        }
        .theme-switch input { opacity: 0; width: 0; height: 0; }
        .slider {
            position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0;
            background-color: #ccc; transition: .4s; border-radius: 24px;
        }
        .slider:before {
            position: absolute; content: ""; height: 16px; width: 16px; left: 4px; bottom: 4px;
            background-color: white; transition: .4s; border-radius: 50%;
        }
        input:checked + .slider { background-color: #2d5016; }
        input:checked + .slider:before { transform: translateX(24px); }
    </style>

</head>
<body>
    <div class="container">
        <div class="form-container">
            <div class="col-lg-5 col-md-7 col-sm-10">
                <div class="card shadow-sm border-0">
                    <div class="card-body p-4 p-md-5">
                        <div class="text-center mb-4">
                            <a href="/" title="Back to Home">
                                <img src="/logo/counselink_logo.png" alt="CounseLink Logo" height="80" class="mb-3 logo-img">
                            </a>
                            <h1 class="h3 fw-bold text-primary">Create Your Account</h1>
                            <p class="text-muted">Join CounseLink to get started.</p>
                        </div>
                        <form action="/register" method="POST">
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="firstName" class="form-label">First Name</label>
                                    <input type="text" class="form-control" id="firstName" name="firstName" placeholder="Enter your first name" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="lastName" class="form-label">Last Name</label>
                                    <input type="text" class="form-control" id="lastName" name="lastName" placeholder="Enter your last name" required>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for="email" class="form-label">Email address</label>
                                <input type="email" class="form-control" id="email" name="email" placeholder="name@example.com" required>
                            </div>
                            <div class="mb-3">
                                <label for="student_id" class="form-label">Student ID</label>
                                <input type="text" class="form-control" id="student_id" name="student_id" placeholder="e.g., MBC2025-0000" required>
                            </div>
                            <div class="mb-3">
                                <label for="gender" class="form-label">Gender</label>
                                <select class="form-select" id="gender" name="gender" required>
                                    <option value="" selected disabled>-- Select Gender --</option>
                                    <option value="Male">Male</option>
                                    <option value="Female">Female</option>
                                    <option value="Other">Other</option>
                                    <option value="Prefer not to say">Prefer not to say</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="password" class="form-label">Password</label>
                                <input type="password" class="form-control" id="password" name="password" required>
                            </div>
                            <div class="form-check mb-3">
                                <input class="form-check-input" type="checkbox" value="on" id="terms-checkbox" name="terms_agreed">
                                <label class="form-check-label" for="terms-checkbox">
                                    I agree to the <a href="#" data-bs-toggle="modal" data-bs-target="#termsModal">Terms and Conditions</a>
                                </label>
                            </div>
                            <button type="submit" id="register-btn" class="btn btn-primary w-100 mt-3" disabled>Create Account</button>
                        </form>
                        <div class="text-center mt-4">
                            <p class="text-muted">Already have an account? <a href="/login" class="fw-medium text-primary">Log In</a></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Theme Toggle HTML -->
    <div class="theme-toggle-container">
        <i class="fas fa-sun"></i>
        <label class="theme-switch" for="theme-toggle-switch">
            <input type="checkbox" id="theme-toggle-switch" />
            <div class="slider round"></div>
        </label>
        <i class="fas fa-moon"></i>
    </div>

    <!-- Terms and Conditions Modal -->
    <div class="modal fade" id="termsModal" tabindex="-1" aria-labelledby="termsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="termsModalLabel">Terms and Conditions</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Welcome to CounseLink. These terms and conditions outline the rules and regulations for the use of CounseLink's Website.</p>
                    <p>By accessing this website we assume you accept these terms and conditions. Do not continue to use CounseLink if you do not agree to take all of the terms and conditions stated on this page.</p>
                    <h6><strong>Confidentiality</strong></h6>
                    <p>All information shared during counseling sessions is confidential. However, there are legal and ethical limits to confidentiality, including risk of harm to self or others, and child abuse.</p>
                    <h6><strong>User Account</strong></h6>
                    <p>You are responsible for maintaining the confidentiality of your account and password and for restricting access to your computer.</p>
                    <h6><strong>Disclaimer</strong></h6>
                    <p>The service is provided "as is". We make no warranties, expressed or implied, and hereby disclaim and negate all other warranties including, without limitation, implied warranties or conditions of merchantability, fitness for a particular purpose, or non-infringement of intellectual property or other violation of rights.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <script src="/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const termsCheckbox = document.getElementById('terms-checkbox');
            const registerBtn = document.getElementById('register-btn');

            termsCheckbox.addEventListener('change', function() {
                registerBtn.disabled = !this.checked;
            });

            // --- Theme Toggle Script ---
            (function() {
                const htmlElement = document.documentElement;
                const setTheme = (theme) => {
                    htmlElement.setAttribute('data-bs-theme', theme);
                    localStorage.setItem('theme', theme);
                    const themeToggle = document.getElementById('theme-toggle-switch');
                    if (themeToggle) {
                        themeToggle.checked = theme === 'dark';
                    }
                };
                const savedTheme = localStorage.getItem('theme') || 'light';
                setTheme(savedTheme);
                const themeToggle = document.getElementById('theme-toggle-switch');
                if (themeToggle) {
                    themeToggle.addEventListener('change', () => {
                        const newTheme = themeToggle.checked ? 'dark' : 'light';
                        setTheme(newTheme);
                    });
                }
            })();
        });
    </script>
</body>
</html>
